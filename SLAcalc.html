<!DOCTYPE html>
<html lang="en">

<head>
	<style>

	body{
		background-color: lightseagreen;
		zoom: 175%
	}
	
	</style>
  <meta charset="utf-8">
  <title>SLA CALCULATOR</title>
  
  <!-- <link href="style.css" rel="stylesheet" /> -->
</head>
<body>
	<h2>SLA CALCULATOR</h2>
	<label for="department">Department:</label>
	<select id="department">
		<option value="walmart">Walmart</option>
		<option value="sams">Sam's Club</option>
		<option value="DMS">DMS</option>
	</select>
	
	<br><br><br>
	
	<label for="priority">Priority (in hours)</label>
	<input id="priority">
	
	</br>
	</br>
	</br>
	
	<label for="assigned">Assigned Date/Time:</label>
	<input id="assigned">
	
	<br><br><br>
	
	<button type="button" onclick="input()">CALCULATE SLA</button>
	
	<br>
	<br>
	<br><br>
	<p id="demo"></p>
	
  <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> -->
  
  <script>
	function input() {
		
		

		let assigned = new Date(document.getElementById("assigned").value);
		//DMS(assigned); -->
		//assigned.setTime(assigned.getTime() + hoursToAdd); -->
		//document.getElementById("demo").innerHTML = "New SLA due date: " + assigned; -->
		if(document.getElementById("department").value == "DMS"){
			DMS(assigned, document.getElementById("priority").value);
		}
		else if(document.getElementById("department").value == "walmart"){
			Walmart(assigned, document.getElementById("priority").value);
		}
		else if(document.getElementById("department").value == "sams"){
			Sams(assigned, document.getElementById("priority").value);
		}
	}
	function Walmart(dtime, hours) {
		const result = new Date(dtime.getTime());
		const minutesToAdd = hours * 60;
		let minutesAdded = 0;


		while (minutesAdded < minutesToAdd) {
		// Skip excluded hours
		const hour = result.getHours();
			if (hour < 6) {
				result.setHours(6, 0, 0, 0); // Start of business day
			} else if (hour >= 23) {
				result.setDate(result.getDate() + 1); // Next day
				result.setHours(6, 0, 0, 0);
			}
			// Add a minute of business time
			result.setMinutes(result.getMinutes() + 1);
			minutesAdded++;
		}
	document.getElementById("demo").innerHTML = "New SLA due date: " + result.toLocaleString();
	}
	function Sams(dtime, hours) {
		const result = new Date(dtime.getTime());
		const minutesToAdd = hours * 60;
		let minutesAdded = 0;


		while (minutesAdded < minutesToAdd) {
		// Skip excluded hours
		const hour = result.getHours();
			if (hour < 8) {
				result.setHours(6, 0, 0, 0); // Start of business day
			} else if (hour >= 20) {
				result.setDate(result.getDate() + 1); // Next day
				result.setHours(6, 0, 0, 0);
			}
			// Add a minute of business time
			result.setMinutes(result.getMinutes() + 1);
			minutesAdded++;
		}
	}
	function DMS(dtime, hours) {
		const result = new Date(dtime);
		const minutesToAdd = hours * 60;
		let minutesAdded = 0;

		while (minutesAdded < minutesToAdd) {
		// Skip excluded days
			while ([0, 6].includes(result.getDay())) {
				result.setDate(result.getDate() + 1);
				result.setHours(8, 0, 0, 0); // Reset to next weekday at 8 AM
			}

		// Skip excluded hours
		const hour = result.getHours();
		if (hour < 8) {
			result.setHours(8, 0, 0, 0); // Start of business day
			} else if (hour >= 17) {
				result.setDate(result.getDate() + 1); // Next day
				result.setHours(8, 0, 0, 0);
				continue; // Recheck day after date advance
			}

			// Add a minute of business time
			result.setMinutes(result.getMinutes() + 1);
			minutesAdded++;
		}

  document.getElementById("demo").innerHTML = "New SLA due date: " + result.toLocaleString();
}
  </script>
  

</body>
</html>